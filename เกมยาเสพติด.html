<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
  </head>
  <body>
    <div class="container mx-auto px-4 py-8">
    <!-- Game Start Screen -->
    <div id="startScreen" class="text-center">
        <div class="bg-white/10 backdrop-blur-md rounded-3xl p-8 max-w-2xl mx-auto border border-white/20">
            <div class="text-8xl mb-6 pulse-animation">üéØ</div>
            <h2 class="text-4xl font-bold text-white mb-4">‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï</h2>
            <p class="text-xl text-white/80 mb-8">‡πÄ‡∏Å‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤</p>
            
            <!-- Player Name Input -->
            <div class="mb-8">
                <div class="bg-white/5 rounded-2xl p-6 border border-white/20">
                    <div class="text-white font-medium mb-3">üë§ ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="text" id="playerFirstName" placeholder="‡∏ä‡∏∑‡πà‡∏≠..." 
                               class="bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-blue-400 focus:bg-white/20 transition-all duration-300"
                               maxlength="15">
                        <input type="text" id="playerLastName" placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•..." 
                               class="bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-blue-400 focus:bg-white/20 transition-all duration-300"
                               maxlength="15">
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="bg-green-500/20 rounded-xl p-4 border border-green-400/30">
                    <div class="text-3xl mb-2">üìö</div>
                    <div class="text-white font-medium">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ</div>
                    <div class="text-white/70 text-sm">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î</div>
                </div>
                <div class="bg-blue-500/20 rounded-xl p-4 border border-blue-400/30">
                    <div class="text-3xl mb-2">üß†</div>
                    <div class="text-white font-medium">‡∏ó‡∏î‡∏™‡∏≠‡∏ö</div>
                    <div class="text-white/70 text-sm">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô</div>
                </div>
                <div class="bg-purple-500/20 rounded-xl p-4 border border-purple-400/30">
                    <div class="text-3xl mb-2">üèÜ</div>
                    <div class="text-white font-medium">‡∏ä‡∏ô‡∏∞</div>
                    <div class="text-white/70 text-sm">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤</div>
                </div>
            </div>

            <!-- Bonus System Info -->
            <div class="bg-orange-500/10 rounded-2xl p-4 mb-8 border border-orange-400/20">
                <div class="text-center">
                    <div class="text-2xl mb-2">‚ö° ‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß</div>
                    <div class="text-white/80 text-sm mb-3">‡∏ï‡∏≠‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÑ‡∏î‡πâ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡πÄ‡∏û‡∏¥‡πà‡∏°!</div>
                    <div class="grid grid-cols-3 gap-2 text-xs">
                        <div class="bg-white/10 rounded-lg p-2">
                            <div class="text-lg">üöÄ</div>
                            <div class="text-white">‚â§5 ‡∏ß‡∏¥</div>
                            <div class="text-orange-400">+5 ‡πÅ‡∏ï‡πâ‡∏°</div>
                        </div>
                        <div class="bg-white/10 rounded-lg p-2">
                            <div class="text-lg">‚ö°</div>
                            <div class="text-white">‚â§10 ‡∏ß‡∏¥</div>
                            <div class="text-orange-400">+3 ‡πÅ‡∏ï‡πâ‡∏°</div>
                        </div>
                        <div class="bg-white/10 rounded-lg p-2">
                            <div class="text-lg">üí®</div>
                            <div class="text-white">‚â§15 ‡∏ß‡∏¥</div>
                            <div class="text-orange-400">+1 ‡πÅ‡∏ï‡πâ‡∏°</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                <button onclick="startGame()" class="w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-bold py-4 px-8 rounded-full text-xl transition-all duration-300 transform hover:scale-105 shadow-lg">
                    üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
                </button>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="showLeaderboard()" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105">
                        üèÜ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                    </button>
                    <button onclick="showStats()" class="bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105">
                        üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏ß‡∏°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Leaderboard Screen -->
    <div id="leaderboardScreen" class="hidden text-center">
        <div class="bg-white/10 backdrop-blur-md rounded-3xl p-8 max-w-2xl mx-auto border border-white/20">
            <div class="text-6xl mb-6">üèÜ</div>
            <h2 class="text-3xl font-bold text-white mb-6">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</h2>
            
            <div id="leaderboardList" class="space-y-3 mb-8">
                <!-- Leaderboard entries will be populated here -->
            </div>

            <button onclick="backToStart()" class="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105">
                ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
            </button>
        </div>
    </div>

    <!-- Stats Screen -->
    <div id="statsScreen" class="hidden text-center">
        <div class="bg-white/10 backdrop-blur-md rounded-3xl p-8 max-w-4xl mx-auto border border-white/20">
            <div class="text-6xl mb-6">üìä</div>
            <h2 class="text-3xl font-bold text-white mb-6">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
            
            <!-- Overall Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-2xl p-6 border border-blue-400/30">
                    <div class="text-4xl mb-2">üë•</div>
                    <div class="text-3xl font-bold text-white mb-1" id="totalPlayers">0</div>
                    <div class="text-white/70">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                </div>
                <div class="bg-gradient-to-br from-green-500/20 to-blue-500/20 rounded-2xl p-6 border border-green-400/30">
                    <div class="text-4xl mb-2">üéÆ</div>
                    <div class="text-3xl font-bold text-white mb-1" id="totalGames">0</div>
                    <div class="text-white/70">‡πÄ‡∏Å‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô</div>
                </div>
                <div class="bg-gradient-to-br from-orange-500/20 to-red-500/20 rounded-2xl p-6 border border-orange-400/30">
                    <div class="text-4xl mb-2">‚è±Ô∏è</div>
                    <div class="text-3xl font-bold text-white mb-1" id="avgTime">0</div>
                    <div class="text-white/70">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ (‡∏ô‡∏≤‡∏ó‡∏µ)</div>
                </div>
            </div>

            <!-- Recent Games -->
            <div class="bg-white/5 rounded-2xl p-6 mb-8 border border-white/20">
                <h3 class="text-xl font-bold text-white mb-4">üïí ‡πÄ‡∏Å‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                <div id="recentGamesList" class="space-y-3">
                    <!-- Recent games will be populated here -->
                </div>
            </div>

            <button onclick="backToStart()" class="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105">
                ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
            </button>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="hidden">
        <!-- Progress Bar -->
        <div class="bg-white/10 backdrop-blur-md rounded-2xl p-4 mb-6 border border-white/20">
            <div class="flex justify-between items-center mb-2">
                <span class="text-white font-medium">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</span>
                <span class="text-white" id="questionCounter">1/10</span>
            </div>
            <div class="bg-white/20 rounded-full h-3">
                <div id="progressBar" class="bg-gradient-to-r from-green-400 to-blue-500 h-3 rounded-full transition-all duration-500" style="width: 10%"></div>
            </div>
        </div>

        <!-- Score Display -->
        <div class="flex justify-center mb-6">
            <div class="bg-white/10 backdrop-blur-md rounded-2xl px-6 py-3 border border-white/20">
                <div class="flex items-center space-x-4">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-green-400" id="score">0</div>
                        <div class="text-white/70 text-sm">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-blue-400" id="streak">0</div>
                        <div class="text-white/70 text-sm">‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-orange-400" id="timer">30</div>
                        <div class="text-white/70 text-sm">‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question Card -->
        <div class="bg-white/10 backdrop-blur-md rounded-3xl p-8 max-w-4xl mx-auto border border-white/20 slide-in">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4" id="questionEmoji">‚ùì</div>
                <h3 class="text-2xl font-bold text-white mb-4" id="questionText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...</h3>
            </div>

            <!-- Answer Options -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="answerOptions">
                <!-- Options will be populated by JavaScript -->
            </div>

            <!-- Feedback -->
            <div id="feedback" class="hidden mt-6 p-4 rounded-2xl text-center">
                <div class="text-2xl mb-2" id="feedbackEmoji"></div>
                <div class="font-bold text-lg mb-2" id="feedbackTitle"></div>
                <div class="text-sm" id="feedbackText"></div>
            </div>

            <!-- Next Button -->
            <div class="text-center mt-6">
                <button id="nextButton" onclick="nextQuestion()" class="hidden bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105">
                    ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí
                </button>
            </div>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="resultsScreen" class="hidden text-center">
        <div class="bg-white/10 backdrop-blur-md rounded-3xl p-8 max-w-2xl mx-auto border border-white/20">
            <div class="text-8xl mb-6" id="resultEmoji">üéâ</div>
            <h2 class="text-4xl font-bold text-white mb-4" id="resultTitle">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢!</h2>
            <div class="text-xl text-white/80 mb-6" id="resultMessage">‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
            
            <!-- Final Score -->
            <div class="bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-2xl p-6 mb-6 border border-white/30">
                <div class="text-5xl font-bold text-white mb-2" id="finalScore">0/10</div>
                <div class="text-white/70">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</div>
            </div>

            <!-- Achievement -->
            <div class="mb-6" id="achievement">
                <div class="text-4xl mb-2" id="achievementEmoji">üèÜ</div>
                <div class="text-lg font-bold text-white" id="achievementTitle">‡∏ô‡∏±‡∏Å‡∏™‡∏π‡πâ‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î</div>
                <div class="text-white/70 text-sm" id="achievementDesc">‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î</div>
            </div>

            <!-- Action Buttons -->
            <div class="space-y-4">
                <button onclick="restartGame()" class="w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105">
                    üîÑ ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                </button>
                <button onclick="shareResults()" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105">
                    üì± ‡πÅ‡∏ä‡∏£‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Footer - Creator Information -->
<footer class="bg-white/5 backdrop-blur-md border-t border-white/20 mt-12">
    <div class="container mx-auto px-4 py-6">
        <div class="text-center">
            <div class="bg-white/10 rounded-2xl p-6 max-w-2xl mx-auto border border-white/20">
                <div class="text-3xl mb-3">üë®‚Äçüè´</div>
                <h3 class="text-xl font-bold text-white mb-2">‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡∏°</h3>
                <div class="text-white/90 font-medium mb-1">‡∏ô‡∏≤‡∏¢‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏±‡∏í‡∏ô‡πå ‡∏†‡∏π‡πà‡∏™‡∏µ‡∏ó‡∏≠‡∏á</div>
                <div class="text-white/80 text-sm mb-2">‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢</div>
                <div class="text-white/70 text-sm mb-1">‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡πà‡∏≤‡∏á‡∏ó‡∏≠‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Ø</div>
                <div class="text-white/60 text-xs">‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£ ‡πÄ‡∏Ç‡∏ï 1</div>
                
                <div class="mt-4 pt-4 border-t border-white/20">
                    <div class="text-white/50 text-xs">
                        üéØ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡πÉ‡∏ô‡πÄ‡∏î‡πá‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏¢‡∏≤‡∏ß‡∏ä‡∏ô
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

<script>
    // Game State
    let currentQuestion = 0;
    let score = 0;
    let streak = 0;
    let maxStreak = 0;
    let answered = false;
    let playerName = '';
    let timeLeft = 30;
    let timerInterval = null;
    let questionStartTime = 0;
    let gameStartTime = 0;
    let shuffledQuestions = [];
    let gameStats = [];

    // Load leaderboard from localStorage
    function getLeaderboard() {
        const saved = localStorage.getItem('drugGameLeaderboard');
        return saved ? JSON.parse(saved) : [];
    }

    // Save leaderboard to localStorage
    function saveLeaderboard(leaderboard) {
        localStorage.setItem('drugGameLeaderboard', JSON.stringify(leaderboard));
    }

    // Add score to leaderboard
    function addToLeaderboard(name, score, percentage, playTime) {
        const leaderboard = getLeaderboard();
        const entry = {
            name: name,
            score: score,
            percentage: percentage,
            playTime: playTime,
            date: new Date().toLocaleDateString('th-TH'),
            timestamp: Date.now()
        };
        
        leaderboard.push(entry);
        leaderboard.sort((a, b) => b.score - a.score);
        
        // Keep only top 10
        if (leaderboard.length > 10) {
            leaderboard.splice(10);
        }
        
        saveLeaderboard(leaderboard);
        
        // Add to game stats
        addToGameStats(entry);
    }

    // Game stats functions
    function getGameStats() {
        const saved = localStorage.getItem('drugGameStats');
        return saved ? JSON.parse(saved) : [];
    }

    function saveGameStats(stats) {
        localStorage.setItem('drugGameStats', JSON.stringify(stats));
    }

    function addToGameStats(entry) {
        const stats = getGameStats();
        stats.push(entry);
        
        // Keep only last 50 games
        if (stats.length > 50) {
            stats.splice(0, stats.length - 50);
        }
        
        saveGameStats(stats);
    }

    // Questions Database
    const questions = [
        {
            emoji: "üö´",
            question: "‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ß‡∏±‡∏¢‡∏£‡∏∏‡πà‡∏ô‡∏Ñ‡∏∑‡∏≠?",
            options: ["‡∏Å‡∏±‡∏ç‡∏ä‡∏≤", "‡∏¢‡∏≤‡∏ö‡πâ‡∏≤", "‡πÄ‡∏Æ‡πÇ‡∏£‡∏≠‡∏µ‡∏ô", "‡πÇ‡∏Ñ‡πÄ‡∏Ñ‡∏ô"],
            correct: 1,
            explanation: "‡∏¢‡∏≤‡∏ö‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ß‡∏±‡∏¢‡∏£‡∏∏‡πà‡∏ô‡πÑ‡∏ó‡∏¢ ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å‡πÅ‡∏•‡∏∞‡∏´‡∏≤‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢"
        },
        {
            emoji: "üß†",
            question: "‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏™‡πà‡∏á‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠‡∏™‡∏°‡∏≠‡∏á‡πÉ‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏î‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?",
            options: ["‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥", "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à", "‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå", "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô"],
            correct: 3,
            explanation: "‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏™‡πà‡∏á‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠‡∏™‡∏°‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏î‡πâ‡∏≤‡∏ô ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡∏•‡∏•‡πå‡∏™‡∏°‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ó‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏≤‡∏ß‡∏£"
        },
        {
            emoji: "üë•",
            question: "‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏Ñ‡∏∑‡∏≠?",
            options: ["‡∏´‡∏ô‡∏µ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏ô", "‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏ô‡πÉ‡∏à‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô", "‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏≠‡πâ‡∏≤‡∏á‡∏ï‡πà‡∏≤‡∏á‡πÜ", "‡πÄ‡∏â‡∏¢‡πÜ ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö"],
            correct: 1,
            explanation: "‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÅ‡∏•‡∏∞‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏¢‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡πà‡∏ß‡πÅ‡∏ô‡πà"
        },
        {
            emoji: "‚ö†Ô∏è",
            question: "‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏û‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏Ñ‡∏∑‡∏≠?",
            options: ["‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß", "‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß", "‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏™‡πâ", "‡∏´‡∏•‡∏±‡∏ö‡πÑ‡∏°‡πà‡∏´‡∏•‡∏±‡∏ö"],
            correct: 0,
            explanation: "‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏™‡∏∏‡∏Ç‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏ï‡πà‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ú‡∏•‡πÄ‡∏™‡∏µ‡∏¢‡∏ó‡∏µ‡πà‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡πÅ‡∏•‡∏∞‡∏¢‡∏≤‡∏ß‡∏ô‡∏≤‡∏ô"
        },
        {
            emoji: "üè†",
            question: "‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏Ñ‡∏∑‡∏≠?",
            options: ["‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î", "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏ß‡πâ‡∏ß‡∏≤‡∏á‡πÉ‡∏à", "‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏≠‡∏á", "‡∏´‡πâ‡∏≤‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ö‡πâ‡∏≤‡∏ô"],
            correct: 1,
            explanation: "‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏ß‡πâ‡∏ß‡∏≤‡∏á‡πÉ‡∏à ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡πâ‡∏≠‡∏°‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î"
        },
        {
            emoji: "üéì",
            question: "‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏Ñ‡∏ß‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?",
            options: ["10-12 ‡∏õ‡∏µ", "13-15 ‡∏õ‡∏µ", "16-18 ‡∏õ‡∏µ", "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏ï‡πÅ‡∏•‡πâ‡∏ß"],
            correct: 0,
            explanation: "‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏Ñ‡∏ß‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏î‡πá‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°"
        },
        {
            emoji: "üí™",
            question: "‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏î‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?",
            options: ["‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°", "‡∏Å‡∏µ‡∏¨‡∏≤‡πÅ‡∏•‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏∞", "‡∏î‡∏π‡∏ó‡∏µ‡∏ß‡∏µ", "‡∏ô‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏ö"],
            correct: 1,
            explanation: "‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏µ‡∏¨‡∏≤‡πÅ‡∏•‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå"
        },
        {
            emoji: "üÜò",
            question: "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏û‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
            options: ["‡πÄ‡∏â‡∏¢‡πÜ ‡πÑ‡∏°‡πà‡∏¢‡∏∏‡πà‡∏á", "‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà", "‡∏ï‡∏±‡∏î‡∏Ç‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå", "‡πÄ‡∏™‡∏û‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô"],
            correct: 1,
            explanation: "‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏ß‡πâ‡∏ß‡∏≤‡∏á‡πÉ‡∏à ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏°‡∏¥‡∏ï‡∏£‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á"
        },
        {
            emoji: "üåü",
            question: "‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏Ñ‡∏∑‡∏≠?",
            options: ["‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏±‡∏ß", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏ï‡∏ô‡πÄ‡∏≠‡∏á", "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏Å‡∏£‡∏ò", "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏â‡∏¢‡πÄ‡∏°‡∏¢"],
            correct: 1,
            explanation: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡∏ï‡∏ô‡πÄ‡∏≠‡∏á ‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢"
        },
        {
            emoji: "üåà",
            question: "‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ó‡∏ó‡∏µ‡πà‡∏™‡∏î‡πÉ‡∏™‡∏õ‡∏£‡∏≤‡∏®‡∏à‡∏≤‡∏Å‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏≤‡∏®‡∏±‡∏¢?",
            options: ["‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏∞‡∏ï‡∏≤", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ", "‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏á", "‡∏≠‡∏≥‡∏ô‡∏≤‡∏à"],
            correct: 1,
            explanation: "‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏ó‡∏µ‡πà‡∏™‡∏î‡πÉ‡∏™‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"
        }
    ];

    // Shuffle array function
    function shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
    }

    // Shuffle question options
    function shuffleQuestionOptions(question) {
        const correctAnswer = question.options[question.correct];
        const shuffledOptions = shuffleArray(question.options);
        const newCorrectIndex = shuffledOptions.indexOf(correctAnswer);
        
        return {
            ...question,
            options: shuffledOptions,
            correct: newCorrectIndex
        };
    }

    function startGame() {
        // Get player name
        const firstNameInput = document.getElementById('playerFirstName');
        const lastNameInput = document.getElementById('playerLastName');
        const firstName = firstNameInput.value.trim();
        const lastName = lastNameInput.value.trim();
        
        if (!firstName || !lastName) {
            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
            if (!firstName) firstNameInput.focus();
            else lastNameInput.focus();
            return;
        }
        
        playerName = `${firstName} ${lastName}`;
        
        // Shuffle questions and their options
        shuffledQuestions = shuffleArray(questions).map(q => shuffleQuestionOptions(q));
        
        document.getElementById('startScreen').classList.add('hidden');
        document.getElementById('gameScreen').classList.remove('hidden');
        currentQuestion = 0;
        score = 0;
        streak = 0;
        maxStreak = 0;
        gameStartTime = Date.now();
        showQuestion();
    }

    function showQuestion() {
        answered = false;
        const question = shuffledQuestions[currentQuestion];
        
        // Reset timer
        timeLeft = 30;
        questionStartTime = Date.now();
        
        // Update progress
        document.getElementById('questionCounter').textContent = `${currentQuestion + 1}/10`;
        document.getElementById('progressBar').style.width = `${((currentQuestion + 1) / 10) * 100}%`;
        
        // Update question
        document.getElementById('questionEmoji').textContent = question.emoji;
        document.getElementById('questionText').textContent = question.question;
        
        // Update score display
        document.getElementById('score').textContent = score;
        document.getElementById('streak').textContent = streak;
        document.getElementById('timer').textContent = timeLeft;
        
        // Start timer
        startTimer();
        
        // Create answer options
        const optionsContainer = document.getElementById('answerOptions');
        optionsContainer.innerHTML = '';
        
        question.options.forEach((option, index) => {
            const button = document.createElement('button');
            button.className = 'bg-white/10 hover:bg-white/20 border border-white/30 rounded-2xl p-4 text-white font-medium transition-all duration-300 transform hover:scale-105 hover:shadow-lg';
            button.textContent = option;
            button.onclick = () => selectAnswer(index);
            optionsContainer.appendChild(button);
        });
        
        // Hide feedback and next button
        document.getElementById('feedback').classList.add('hidden');
        document.getElementById('nextButton').classList.add('hidden');
    }

    function startTimer() {
        if (timerInterval) clearInterval(timerInterval);
        
        timerInterval = setInterval(() => {
            timeLeft--;
            const timerElement = document.getElementById('timer');
            timerElement.textContent = timeLeft;
            
            // Change color based on time left
            if (timeLeft <= 5) {
                timerElement.className = 'text-2xl font-bold text-red-400';
            } else if (timeLeft <= 10) {
                timerElement.className = 'text-2xl font-bold text-yellow-400';
            } else {
                timerElement.className = 'text-2xl font-bold text-orange-400';
            }
            
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                if (!answered) {
                    selectAnswer(-1); // Auto-select wrong answer when time runs out
                }
            }
        }, 1000);
    }

    function selectAnswer(selectedIndex) {
        if (answered) return;
        answered = true;
        
        // Stop timer
        clearInterval(timerInterval);
        
        const question = shuffledQuestions[currentQuestion];
        const isCorrect = selectedIndex === question.correct && selectedIndex !== -1;
        const buttons = document.querySelectorAll('#answerOptions button');
        
        let bonusPoints = 0;
        let answerTime = 0;
        
        if (selectedIndex !== -1) {
            answerTime = Math.round((Date.now() - questionStartTime) / 1000);
        }
        
        // Calculate bonus points based on speed (only for correct answers)
        if (isCorrect) {
            if (answerTime <= 5) {
                bonusPoints = 5; // Super fast bonus
            } else if (answerTime <= 10) {
                bonusPoints = 3; // Fast bonus
            } else if (answerTime <= 15) {
                bonusPoints = 1; // Quick bonus
            }
        }
        
        // Update score and streak
        if (isCorrect) {
            score += 10 + bonusPoints;
            streak++;
            maxStreak = Math.max(maxStreak, streak);
        } else {
            streak = 0;
        }
        
        // Style buttons
        buttons.forEach((button, index) => {
            if (index === question.correct) {
                button.classList.add('correct-answer');
                button.classList.remove('bg-white/10', 'hover:bg-white/20');
            } else if (index === selectedIndex && !isCorrect && selectedIndex !== -1) {
                button.classList.add('wrong-answer');
                button.classList.remove('bg-white/10', 'hover:bg-white/20');
            } else {
                button.style.opacity = '0.5';
            }
            button.onclick = null;
        });
        
        // Show feedback
        const feedback = document.getElementById('feedback');
        const feedbackEmoji = document.getElementById('feedbackEmoji');
        const feedbackTitle = document.getElementById('feedbackTitle');
        const feedbackText = document.getElementById('feedbackText');
        
        if (selectedIndex === -1) {
            // Time ran out
            feedback.className = 'mt-6 p-4 rounded-2xl text-center bg-red-500/20 border border-red-400/30';
            feedbackEmoji.textContent = '‚è∞';
            feedbackTitle.textContent = '‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!';
            feedbackTitle.className = 'font-bold text-lg mb-2 text-red-400';
            feedbackText.textContent = question.explanation;
        } else if (isCorrect) {
            feedback.className = 'mt-6 p-4 rounded-2xl text-center bg-green-500/20 border border-green-400/30';
            feedbackEmoji.textContent = '‚úÖ';
            
            let titleText = '‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!';
            if (bonusPoints > 0) {
                titleText += ` (+${bonusPoints} ‡πÇ‡∏ö‡∏ô‡∏±‡∏™!)`;
                if (bonusPoints === 5) feedbackEmoji.textContent = 'üöÄ';
                else if (bonusPoints === 3) feedbackEmoji.textContent = '‚ö°';
                else if (bonusPoints === 1) feedbackEmoji.textContent = 'üí®';
            }
            
            feedbackTitle.textContent = titleText;
            feedbackTitle.className = 'font-bold text-lg mb-2 text-green-400';
            feedbackText.textContent = question.explanation;
        } else {
            feedback.className = 'mt-6 p-4 rounded-2xl text-center bg-red-500/20 border border-red-400/30';
            feedbackEmoji.textContent = '‚ùå';
            feedbackTitle.textContent = '‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
            feedbackTitle.className = 'font-bold text-lg mb-2 text-red-400';
            feedbackText.textContent = question.explanation;
        }
        
        feedbackText.className = 'text-sm text-white/80';
        feedback.classList.remove('hidden');
        
        // Show next button
        document.getElementById('nextButton').classList.remove('hidden');
        
        // Update score display
        document.getElementById('score').textContent = score;
        document.getElementById('streak').textContent = streak;
    }

    function nextQuestion() {
        currentQuestion++;
        if (currentQuestion < questions.length) {
            showQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        document.getElementById('gameScreen').classList.add('hidden');
        document.getElementById('resultsScreen').classList.remove('hidden');
        
        const percentage = (score / (questions.length * 10)) * 100;
        const gameEndTime = Date.now();
        const playTime = Math.round((gameEndTime - gameStartTime) / 1000 / 60 * 10) / 10; // minutes with 1 decimal
        
        // Add to leaderboard
        addToLeaderboard(playerName, score, percentage, playTime);
        
        // Set result emoji and title based on score
        let resultEmoji, resultTitle, achievementEmoji, achievementTitle, achievementDesc;
        
        if (percentage >= 90) {
            resultEmoji = 'üèÜ';
            resultTitle = '‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!';
            achievementEmoji = 'üåü';
            achievementTitle = '‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î';
            achievementDesc = '‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡πÅ‡∏•‡∏∞‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô';
        } else if (percentage >= 70) {
            resultEmoji = 'üéâ';
            resultTitle = '‡∏î‡∏µ‡∏°‡∏≤‡∏Å!';
            achievementEmoji = 'üí™';
            achievementTitle = '‡∏ô‡∏±‡∏Å‡∏™‡∏π‡πâ‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î';
            achievementDesc = '‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ';
        } else if (percentage >= 50) {
            resultEmoji = 'üëç';
            resultTitle = '‡∏î‡∏µ!';
            achievementEmoji = 'üìö';
            achievementTitle = '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î';
            achievementDesc = '‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡∏Ñ‡∏ß‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°';
        } else {
            resultEmoji = 'üí™';
            resultTitle = '‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏õ!';
            achievementEmoji = 'üå±';
            achievementTitle = '‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î';
            achievementDesc = '‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏ß‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô';
        }
        
        document.getElementById('resultEmoji').textContent = resultEmoji;
        document.getElementById('resultTitle').textContent = resultTitle;
        document.getElementById('resultMessage').textContent = `${playerName} ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${score} ‡∏à‡∏≤‡∏Å ${questions.length * 10} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (${percentage.toFixed(0)}%)`;
        document.getElementById('finalScore').textContent = `${score}/${questions.length * 10}`;
        document.getElementById('achievementEmoji').textContent = achievementEmoji;
        document.getElementById('achievementTitle').textContent = achievementTitle;
        document.getElementById('achievementDesc').textContent = achievementDesc;
    }

    function restartGame() {
        document.getElementById('resultsScreen').classList.add('hidden');
        document.getElementById('startScreen').classList.remove('hidden');
    }

    function showLeaderboard() {
        document.getElementById('startScreen').classList.add('hidden');
        document.getElementById('leaderboardScreen').classList.remove('hidden');
        
        const leaderboard = getLeaderboard();
        const leaderboardList = document.getElementById('leaderboardList');
        
        if (leaderboard.length === 0) {
            leaderboardList.innerHTML = `
                <div class="bg-white/5 rounded-2xl p-6 border border-white/20">
                    <div class="text-white/70">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</div>
                    <div class="text-white/50 text-sm mt-2">‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!</div>
                </div>
            `;
        } else {
            leaderboardList.innerHTML = leaderboard.map((entry, index) => {
                let rankEmoji = '';
                let rankClass = '';
                
                if (index === 0) {
                    rankEmoji = 'ü•á';
                    rankClass = 'bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border-yellow-400/30';
                } else if (index === 1) {
                    rankEmoji = 'ü•à';
                    rankClass = 'bg-gradient-to-r from-gray-400/20 to-gray-500/20 border-gray-400/30';
                } else if (index === 2) {
                    rankEmoji = 'ü•â';
                    rankClass = 'bg-gradient-to-r from-orange-600/20 to-yellow-600/20 border-orange-400/30';
                } else {
                    rankEmoji = `#${index + 1}`;
                    rankClass = 'bg-white/5 border-white/20';
                }
                
                return `
                    <div class="${rankClass} rounded-2xl p-4 border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="text-2xl font-bold text-white">${rankEmoji}</div>
                                <div>
                                    <div class="text-white font-medium">${entry.name}</div>
                                    <div class="text-white/70 text-sm">${entry.date}</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-white">${entry.score}</div>
                                <div class="text-white/70 text-sm">${entry.percentage.toFixed(0)}% ‚Ä¢ ${entry.playTime || 0} ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
    }

    function backToStart() {
        document.getElementById('leaderboardScreen').classList.add('hidden');
        document.getElementById('statsScreen').classList.add('hidden');
        document.getElementById('startScreen').classList.remove('hidden');
    }

    function showStats() {
        document.getElementById('startScreen').classList.add('hidden');
        document.getElementById('statsScreen').classList.remove('hidden');
        
        const stats = getGameStats();
        const leaderboard = getLeaderboard();
        
        // Calculate overall statistics
        const totalGames = stats.length;
        const uniquePlayers = new Set(stats.map(s => s.name)).size;
        const avgTime = totalGames > 0 ? 
            Math.round(stats.reduce((sum, s) => sum + (s.playTime || 0), 0) / totalGames * 10) / 10 : 0;
        
        // Update stats display
        document.getElementById('totalPlayers').textContent = uniquePlayers;
        document.getElementById('totalGames').textContent = totalGames;
        document.getElementById('avgTime').textContent = avgTime;
        
        // Show recent games (last 10)
        const recentGames = stats.slice(-10).reverse();
        const recentGamesList = document.getElementById('recentGamesList');
        
        if (recentGames.length === 0) {
            recentGamesList.innerHTML = `
                <div class="bg-white/5 rounded-xl p-4 border border-white/20">
                    <div class="text-white/70">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏°</div>
                </div>
            `;
        } else {
            recentGamesList.innerHTML = recentGames.map((game, index) => {
                const timeAgo = getTimeAgo(game.timestamp);
                return `
                    <div class="bg-white/5 rounded-xl p-4 border border-white/20">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="text-2xl">${index < 3 ? ['ü•á', 'ü•à', 'ü•â'][index] : 'üéÆ'}</div>
                                <div class="text-left">
                                    <div class="text-white font-medium">${game.name}</div>
                                    <div class="text-white/70 text-sm">${timeAgo}</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-white font-bold">${game.score} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                                <div class="text-white/70 text-sm">${game.playTime} ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
    }

    function getTimeAgo(timestamp) {
        const now = Date.now();
        const diff = now - timestamp;
        const minutes = Math.floor(diff / 60000);
        const hours = Math.floor(diff / 3600000);
        const days = Math.floor(diff / 86400000);
        
        if (days > 0) return `${days} ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß`;
        if (hours > 0) return `${hours} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß`;
        if (minutes > 0) return `${minutes} ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß`;
        return '‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà';
    }

    function shareResults() {
        const percentage = (score / (questions.length * 10)) * 100;
        const leaderboard = getLeaderboard();
        const playerRank = leaderboard.findIndex(entry => entry.name === playerName && entry.score === score) + 1;
        
        let text = `üõ°Ô∏è ‡∏â‡∏±‡∏ô ${playerName} ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${score}/${questions.length * 10} (${percentage.toFixed(0)}%) ‡πÉ‡∏ô‡πÄ‡∏Å‡∏°‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î!`;
        
        if (playerRank > 0) {
            text += ` ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà ${playerRank} ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`;
        }
        
        text += ` ‡∏°‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞! üí™‚ú®`;
        
        if (navigator.share) {
            navigator.share({
                title: '‡πÄ‡∏Å‡∏°‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î - ‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï',
                text: text
            });
        } else {
            // Fallback for browsers that don't support Web Share API
            navigator.clipboard.writeText(text).then(() => {
                alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡πâ‡∏ß! ‡∏ô‡∏≥‡πÑ‡∏õ‡πÅ‡∏ä‡∏£‡πå‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢');
            });
        }
    }
</script>
  </body>
</html>
